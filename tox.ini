[tox]
envlist = unit, flake8, coverage-report

[testenv]
basepython = python3
commands =
    coverage erase
    coverage run --parallel -m pytest --verbose tests/unit -vv
deps =
    -r{toxinidir}/requirements.txt
    -r{toxinidir}/requirements-aiohttp.txt
    -r{toxinidir}/requirements-postgres.txt
    -r{toxinidir}/tests/requirements.txt

[testenv:flake8]
basepython = python3
skip_install = true
commands =
    flake8 --config={toxinidir}/.flake8 src/anansi/ tests/ setup.py
deps =
  -r{toxinidir}/requirements-dev.txt

[testenv:coverage-report]
basepython = python3
skip_install = true
deps = coverage
commands =
    coverage combine
    coverage report
    coverage html
